name: Rollback

on:
  workflow_dispatch:
    inputs:
      image_tag:
        description: "Image tag (e.g., main-abc1234)"
        required: true
        type: string

jobs:
  rollback:
    uses: octopus-synapse/octopus-workflows/.github/workflows/rollback.yml@main
    with:
      image-tag: ${{ inputs.image_tag }}
      service-port: "3001"
      deploy-path: "/opt/profile-services"
    secrets:
      OCTOPUS_SSH_PRIVATE_KEY: ${{ secrets.OCTOPUS_SSH_PRIVATE_KEY }}
      OCTOPUS_VM_HOST: ${{ secrets.OCTOPUS_VM_HOST }}
      OCTOPUS_VM_USER: ${{ secrets.OCTOPUS_VM_USER }}
