bun test v1.2.23 (cf136713)

src/app.controller.spec.ts:
(pass) AppController > root > should return "Hello World!" [7.27ms]
(pass) AppController > health > should return health status [1.30ms]
(pass) AppController > version > should return version information [2.22ms]
(pass) AppController > version > should use development environment when manifest not available [1.48ms]

src/resumes/resumes.service.spec.ts:
(pass) ResumesService > Resume Limit (Maximum 4) > should allow creating resume when under limit [1.48ms]
(pass) ResumesService > Resume Limit (Maximum 4) > should reject creating 5th resume with error [1.22ms]
(pass) ResumesService > Resume Limit (Maximum 4) > should show clear error message about 4 resume limit [0.87ms]
(pass) ResumesService > Resume Limit (Maximum 4) > should allow creating exactly 4 resumes [1.02ms]
(pass) ResumesService > Resume CRUD Operations > should return all resumes for a user [0.89ms]
(pass) ResumesService > Resume CRUD Operations > should return resume by id if owned by user [0.78ms]
(pass) ResumesService > Resume CRUD Operations > should throw NotFoundException for non-existent resume [0.80ms]
(pass) ResumesService > Resume CRUD Operations > should update resume if owned by user [0.67ms]
(pass) ResumesService > Resume CRUD Operations > should delete resume if owned by user [0.64ms]
(pass) ResumesService > Remaining Slots > should correctly calculate remaining slots [0.58ms]
(pass) ResumesService > Remaining Slots > should show 0 remaining when at limit [0.50ms]
(pass) Experience Order Uniqueness > should reject creating experience with duplicate order [0.06ms]
(pass) Experience Order Uniqueness > should allow creating experience with unique order [0.03ms]
(pass) Experience Order Uniqueness > should auto-assign next order when not specified [0.03ms]
(pass) isCurrent and endDate Validation > should accept isCurrent=true with endDate=null [0.03ms]
(pass) isCurrent and endDate Validation > should reject isCurrent=true with non-null endDate [0.03ms]
(pass) isCurrent and endDate Validation > should accept isCurrent=false with endDate set
(pass) isCurrent and endDate Validation > should accept isCurrent=false with endDate=null (left position)
(pass) Skills Reference Validation > should accept valid skill references [0.07ms]
(pass) Skills Reference Validation > should reject invalid skill references [0.02ms]
(pass) Skills Reference Validation > should accept empty skill references [0.03ms]

src/resumes/resumes.service.bug-detection.spec.ts:
(pass) ResumesService - Bug Detection > BUG #3: Resume limit should return HTTP 422 > should throw UnprocessableEntityException (422) when limit reached [1.65ms]
(pass) ResumesService - Bug Detection > BUG #3: Resume limit should return HTTP 422 > should NOT throw BadRequestException (400) for limit error [1.03ms]
(pass) ResumesService - Bug Detection > BUG #3: Resume limit should return HTTP 422 > should have exactly the message "O limite mÃ¡ximo de currÃ­culos Ã© 4" (pt-BR) [0.96ms]
(pass) ResumesService - Bug Detection > Resume limit boundary tests > should allow creating 4th resume (at limit) [0.55ms]
(pass) ResumesService - Bug Detection > Resume limit boundary tests > should reject at exactly 4 existing resumes [0.50ms]

src/resumes/resumes.repository.spec.ts:
(pass) ResumesRepository > findAll > should return empty array when user has no resumes [1.08ms]
(pass) ResumesRepository > findAll > should return all resumes for the user [0.67ms]
(pass) ResumesRepository > findOne > should return resume when it exists and belongs to user [0.59ms]
(pass) ResumesRepository > findOne > should return null when resume does not exist [0.50ms]
(pass) ResumesRepository > findOne > should return null when resume belongs to another user [0.45ms]
(pass) ResumesRepository > create > should create resume and return it with generated id [0.53ms]
(pass) ResumesRepository > create > should persist resume to storage [0.64ms]
(pass) ResumesRepository > update > should update resume when user owns it [0.59ms]
(pass) ResumesRepository > update > should throw ForbiddenException when resume does not exist [0.81ms]
(pass) ResumesRepository > update > should throw ForbiddenException when user does not own resume [1.76ms]
(pass) ResumesRepository > delete > should delete resume and return true when user owns it [1.35ms]
(pass) ResumesRepository > delete > should throw ForbiddenException when resume does not exist [1.32ms]
(pass) ResumesRepository > delete > should throw ForbiddenException when user does not own resume [0.99ms]
(pass) ResumesRepository > findByUserId > should return null when user has no resume [0.72ms]
(pass) ResumesRepository > findByUserId > should return first resume for user [1.04ms]

src/users/users.service.spec.ts:
(pass) UsersService (Facade) > getPublicProfileByUsername > should return public profile with user and resume data [2.38ms]
(pass) UsersService (Facade) > getProfile > should return user profile with expected fields [1.22ms]
(pass) UsersService (Facade) > updateProfile > should return success with updated profile data [0.67ms]
(pass) UsersService (Facade) > getPreferences > should return user preferences [0.51ms]
(pass) UsersService (Facade) > updatePreferences > should return success when preferences are updated [0.47ms]
(pass) UsersService (Facade) > getFullPreferences > should return complete preferences object [0.48ms]
(pass) UsersService (Facade) > updateFullPreferences > should return success when full preferences are updated [0.48ms]
(pass) UsersService (Facade) > updateUsername > should return success with new username [0.52ms]
(pass) UsersService (Facade) > checkUsernameAvailability > should return availability status [0.54ms]

src/upload/upload.service.spec.ts:
(pass) UploadService > uploadProfileImage > should upload valid profile image and return result [1.25ms]
(pass) UploadService > uploadProfileImage > should generate unique keys for multiple uploads [0.69ms]
(pass) UploadService > uploadProfileImage > should preserve file extension in uploaded key [0.55ms]
(pass) UploadService > uploadProfileImage > should throw BadRequestException when file size exceeds limit [0.57ms]
(pass) UploadService > uploadProfileImage > should throw BadRequestException for invalid MIME type [0.55ms]
(pass) UploadService > uploadProfileImage > should throw BadRequestException when S3 upload fails [0.55ms]
(pass) UploadService > uploadCompanyLogo > should upload valid company logo and return result [1.19ms]
(pass) UploadService > uploadCompanyLogo > should throw BadRequestException for oversized file [1.62ms]
(pass) UploadService > uploadCompanyLogo > should throw BadRequestException when S3 upload fails [0.99ms]
(pass) UploadService > deleteFile > should delete file successfully and log result [0.84ms]
(pass) UploadService > deleteFile > should return false when deletion fails without throwing [0.57ms]
(pass) UploadService > isServiceAvailable > should return true when S3 service is enabled [0.46ms]
(pass) UploadService > isServiceAvailable > should return false when S3 service is disabled [0.39ms]
(pass) UploadService > file validation > should accept all allowed MIME types [0.51ms]
(pass) UploadService > file validation > should handle files at exact size limit [0.45ms]
(pass) UploadService > file validation > should handle filenames with multiple dots correctly [0.49ms]
(pass) UploadService > file validation > should convert extension to lowercase [0.45ms]

src/upload/upload.service.security.spec.ts:
(pass) UploadService - SECURITY BUG DETECTION > BUG-024: SVG XSS Prevention > should REJECT SVG files with embedded scripts [0.89ms]
(pass) UploadService - SECURITY BUG DETECTION > BUG-024: SVG XSS Prevention > should REJECT SVG with event handlers [0.49ms]
102 |       };
103 | 
104 |       // BUG: This should detect it's not a real JPEG!
105 |       await expect(
106 |         service.uploadProfileImage('user-123', spoofedFile),
107 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:107:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:95:53)
(fail) UploadService - SECURITY BUG DETECTION > BUG-025: Magic Bytes Validation > should REJECT file with spoofed MIME type [0.49ms]
116 |         size: 100,
117 |       };
118 | 
119 |       await expect(
120 |         service.uploadProfileImage('user-123', invalidJpeg),
121 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:121:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:110:53)
(fail) UploadService - SECURITY BUG DETECTION > BUG-025: Magic Bytes Validation > should validate JPEG magic bytes (FFD8FF) [0.49ms]
129 |         size: 100,
130 |       };
131 | 
132 |       await expect(
133 |         service.uploadProfileImage('user-123', invalidPng),
134 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:134:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:124:54)
(fail) UploadService - SECURITY BUG DETECTION > BUG-025: Magic Bytes Validation > should validate PNG magic bytes (89504E47) [0.45ms]
151 |       };
152 | 
153 |       // BUG: This extracts 'php' as extension but should reject!
154 |       await expect(
155 |         service.uploadProfileImage('user-123', doubleExtension),
156 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:156:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:145:65)
(fail) UploadService - SECURITY BUG DETECTION > BUG-026: Extension Sanitization > should REJECT double extension attack (image.jpg.php) [0.40ms]
164 |         size: 100,
165 |       };
166 | 
167 |       await expect(
168 |         service.uploadProfileImage('user-123', nullByteAttack),
169 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:169:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:159:61)
(fail) UploadService - SECURITY BUG DETECTION > BUG-026: Extension Sanitization > should REJECT null byte attack (image.php%00.jpg) [0.40ms]
177 |         size: 100,
178 |       };
179 | 
180 |       await expect(
181 |         service.uploadProfileImage('user-123', traversalAttack),
182 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:182:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/upload/upload.service.security.spec.ts:172:57)
(fail) UploadService - SECURITY BUG DETECTION > BUG-026: Extension Sanitization > should REJECT directory traversal in filename [0.42ms]
(pass) UploadService - SECURITY BUG DETECTION > BUG-027: File Ownership Validation > should REJECT deleting another users file [0.41ms]

src/onboarding/onboarding.service.spec.ts:
(pass) OnboardingService > completeOnboarding > should successfully complete onboarding [3.16ms]
(pass) OnboardingService > completeOnboarding > should throw NotFoundException if user does not exist [1.00ms]
(pass) OnboardingService > completeOnboarding > should throw error if data validation fails [1.13ms]
(pass) OnboardingService > getOnboardingStatus > should successfully get onboarding status [0.69ms]
(pass) OnboardingService > getOnboardingStatus > should return incomplete status for user who has not completed onboarding [0.45ms]
(pass) OnboardingService > getOnboardingStatus > should throw NotFoundException if user does not exist [0.48ms]

src/auth/rate-limiting.bug.spec.ts:
35 |         }
36 |       }
37 | 
38 |       // BUG: No tracking of failed attempts!
39 |       // Should call incrementFailedAttempts on each failure
40 |       expect(mockLoginService.incrementFailedAttempts).toHaveBeenCalledTimes(5);
                                                            ^
error: expect(received).toHaveBeenCalledTimes(expected)

Expected number of calls: 5
Received number of calls: 0

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/auth/rate-limiting.bug.spec.ts:40:56)
(fail) Rate Limiting - BUG DETECTION > BUG-010: Login Failed Attempts Not Tracked > should block IP after 5 failed login attempts [0.74ms]
(pass) Rate Limiting - BUG DETECTION > BUG-010: Login Failed Attempts Not Tracked > should track failed attempts per IP, not per email [0.02ms]
(pass) Rate Limiting - BUG DETECTION > BUG-010: Login Failed Attempts Not Tracked > should reset counter after successful login
(pass) Rate Limiting - BUG DETECTION > BUG-032: Password Reset Email Bombing > should limit password reset requests per email [2.05ms]
(pass) Rate Limiting - BUG DETECTION > BUG-032: Password Reset Email Bombing > should not reveal if email exists [0.18ms]
(pass) Rate Limiting - BUG DETECTION > BUG-049: Verification Email Rate Limit > should limit verification emails per IP
(pass) Rate Limiting - BUG DETECTION > BUG-049: Verification Email Rate Limit > should limit total emails sent per timeframe

src/auth/auth.service.spec.ts:
(pass) AuthService (Facade) > signup > should return auth response with token and user on successful signup [0.90ms]
(pass) AuthService (Facade) > login > should return auth response with token on successful login [0.52ms]
(pass) AuthService (Facade) > validateUser > should return user without password when credentials are valid [0.47ms]
(pass) AuthService (Facade) > refreshToken > should return new token on successful refresh [0.42ms]
(pass) AuthService (Facade) > refreshTokenWithToken > should return new token when given valid refresh token [0.41ms]
(pass) AuthService (Facade) > getCurrentUser > should return current user data [0.42ms]
(pass) AuthService (Facade) > requestEmailVerification > should return success when verification email is sent [0.42ms]
(pass) AuthService (Facade) > verifyEmail > should return success when email is verified [0.52ms]
(pass) AuthService (Facade) > forgotPassword > should return success when reset email is sent [0.43ms]
(pass) AuthService (Facade) > resetPassword > should return success when password is reset [0.42ms]
(pass) AuthService (Facade) > changePassword > should return success when password is changed [0.43ms]
(pass) AuthService (Facade) > changeEmail > should return success when email is changed [0.48ms]
(pass) AuthService (Facade) > deleteAccount > should return success when account is deleted [0.40ms]

src/dsl/dsl-compiler.service.spec.ts:
(pass) DslCompilerService > should be defined [0.88ms]
(pass) DslCompilerService > compileForHtml > should compile valid DSL to AST [1.43ms]
(pass) DslCompilerService > compileForHtml > should resolve page dimensions for A4 [0.86ms]
(pass) DslCompilerService > compileForHtml > should create two columns for two-column layout [0.75ms]
(pass) DslCompilerService > compileForHtml > should place sections in correct columns [0.74ms]
(pass) DslCompilerService > compileForHtml > should resolve typography tokens to concrete values [0.98ms]
(pass) DslCompilerService > compileForHtml > should resolve spacing tokens with density factor [0.93ms]
(pass) DslCompilerService > compileForHtml > should filter out hidden sections [1.07ms]
(pass) DslCompilerService > compileForHtml > should sort sections by order [0.98ms]
(pass) DslCompilerService > single-column layout > should create single column [1.04ms]
(pass) DslCompilerService > compact density > should apply density factor to spacing [1.75ms]
(pass) DslCompilerService > heading styles > should resolve underline heading style [1.42ms]
(pass) DslCompilerService > heading styles > should resolve uppercase heading style [1.42ms]

src/dsl/dsl.repository.spec.ts:
(pass) DslRepository > preview > should compile DSL for preview [0.95ms]
(pass) DslRepository > validate > should validate DSL [0.47ms]
(pass) DslRepository > render > should render resume AST [0.64ms]
(pass) DslRepository > render > should throw if resume not found [0.52ms]
(pass) DslRepository > renderPublic > should render public resume AST [0.53ms]
(pass) DslRepository > renderPublic > should throw if public resume not found [0.37ms]
(pass) DslRepository > mergeDsl > should deep merge DSL objects [0.38ms]

src/dsl/dsl-compiler.service.bug.spec.ts:
82 | 
83 |       // BUG: No migration happens!
84 |       // Old DSL should be automatically migrated to current version
85 |       const result = service.compile(oldDsl as any);
86 | 
87 |       expect(result.meta.version).toBe('2.0'); // Should be migrated
                                       ^
error: expect(received).toBe(expected)

Expected: "2.0"
Received: "1.0"

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/dsl/dsl-compiler.service.bug.spec.ts:87:35)
(fail) DslCompilerService - BUG DETECTION > BUG-017: Version Migration Not Implemented > should migrate DSL from v1 to v2 [1.23ms]
(pass) DslCompilerService - BUG DETECTION > BUG-017: Version Migration Not Implemented > should handle version "1.0" documents [1.32ms]
(pass) DslCompilerService - BUG DETECTION > BUG-047: No Input Size Limit > should reject excessively large DSL [0.91ms]
(pass) DslCompilerService - BUG DETECTION > BUG-047: No Input Size Limit > should limit number of sections [0.69ms]
(pass) DslCompilerService - BUG DETECTION > DSL Compilation Security > should not allow script injection in tokens [0.52ms]

src/dsl/dsl-compiler-data.spec.ts:
(pass) DslCompilerService - Data Mapping > should compile section data correctly [1.36ms]
(pass) DslCompilerService - Data Mapping > should use placeholder data when resume is not provided [0.79ms]

src/health/health.controller.spec.ts:
(pass) HealthController > check (all services) > should check all health indicators [1.07ms]
(pass) HealthController > check (all services) > should invoke all health indicators when called [0.93ms]
(pass) HealthController > checkDatabase > should check only database health [0.52ms]
(pass) HealthController > checkDatabase > should invoke database health indicator when called [0.42ms]
(pass) HealthController > checkRedis > should check only redis health [0.38ms]
(pass) HealthController > checkRedis > should invoke redis health indicator when called [0.42ms]
(pass) HealthController > checkStorage > should check only storage health [0.57ms]
(pass) HealthController > checkStorage > should invoke storage health indicator when called [0.55ms]
(pass) HealthController > checkTranslate > should check only translate service health [0.44ms]
(pass) HealthController > checkTranslate > should invoke translate health indicator when called [0.44ms]
(pass) HealthController > error handling > should handle health check failures for all services [0.56ms]
(pass) HealthController > error handling > should handle database health check failure [0.48ms]

src/translation/translation.service.spec.ts:
(pass) TranslationService > onModuleInit > should check service health on initialization [0.74ms]
(pass) TranslationService > checkServiceHealth > should delegate health check to core service [0.35ms]
(pass) TranslationService > checkServiceHealth > should return false when service is unavailable [0.27ms]
(pass) TranslationService > translatePtToEn > should translate Portuguese text to English [0.30ms]
(pass) TranslationService > translateEnToPt > should translate English text to Portuguese [0.30ms]
(pass) TranslationService > translate > should translate text with Portuguese to English [0.31ms]
(pass) TranslationService > translate > should handle English to Portuguese translation [0.31ms]
(pass) TranslationService > translateBatch > should translate multiple texts at once [0.33ms]
(pass) TranslationService > translateBatch > should handle empty batch gracefully [0.32ms]
(pass) TranslationService > translateResumeToEnglish > should translate resume data to English [0.32ms]
(pass) TranslationService > translateResumeToEnglish > should handle complex resume structure [0.30ms]
(pass) TranslationService > translateResumeToPortuguese > should translate resume data to Portuguese [0.34ms]
(pass) TranslationService > isAvailable > should return true when service is available [0.28ms]
(pass) TranslationService > isAvailable > should return false when service is unavailable [0.22ms]
(pass) TranslationService > service availability delegation > should consistently reflect core service availability state [0.25ms]

src/common/email/email.service.spec.ts:
(pass) EmailService (Adapter) > sendEmail > should complete successfully when sending raw email [1.13ms]
(pass) EmailService (Adapter) > sendEmail > should propagate error when sending fails [0.60ms]
(pass) EmailService (Adapter) > sendVerificationEmail > should complete successfully when sending verification email [0.47ms]
(pass) EmailService (Adapter) > sendVerificationEmail > should propagate error when sending fails [0.40ms]
(pass) EmailService (Adapter) > sendPasswordResetEmail > should complete successfully when sending password reset email [0.39ms]
(pass) EmailService (Adapter) > sendPasswordResetEmail > should propagate error when sending fails [0.33ms]
(pass) EmailService (Adapter) > sendWelcomeEmail > should complete successfully when sending welcome email [0.32ms]
(pass) EmailService (Adapter) > sendWelcomeEmail > should propagate error when sending fails [0.34ms]
(pass) EmailService (Adapter) > sendPasswordChangedEmail > should complete successfully when sending password changed email [0.31ms]
(pass) EmailService (Adapter) > sendPasswordChangedEmail > should propagate error when sending fails [0.27ms]

src/common/audit/audit-log.service.spec.ts:
(pass) AuditLogService > log > should create audit log entry [0.84ms]
(pass) AuditLogService > log > should extract request metadata when provided [0.38ms]
(pass) AuditLogService > log > should not throw on prisma errors [0.37ms]
(pass) AuditLogService > logUsernameChange > should log username change with before/after [0.33ms]
(pass) AuditLogService > logResumeDeletion > should log resume deletion with data snapshot [0.37ms]
(pass) AuditLogService > logVisibilityChange > should log visibility change [0.32ms]
(pass) AuditLogService > logUnauthorizedAccess > should log unauthorized access attempt [0.32ms]
(pass) AuditLogService > getUserLogs > should return logs for specific user [0.40ms]
(pass) AuditLogService > cleanupOldLogs > should delete old logs and return count [0.36ms]

src/common/cache/cache.service.spec.ts:
(pass) CacheService (Adapter) > when Redis is enabled > should report enabled status [0.68ms]
(pass) CacheService (Adapter) > when Redis is enabled > get/set operations > should return null for non-existent key [0.78ms]
(pass) CacheService (Adapter) > when Redis is enabled > get/set operations > should return stored value after set [0.55ms]
(pass) CacheService (Adapter) > when Redis is enabled > get/set operations > should return null after delete [0.50ms]
(pass) CacheService (Adapter) > when Redis is enabled > deletePattern > should delete all keys matching pattern [0.53ms]
(pass) CacheService (Adapter) > when Redis is enabled > flush > should clear all cached data [0.64ms]
(pass) CacheService (Adapter) > when Redis is enabled > lock operations > should acquire lock when not locked [0.72ms]
(pass) CacheService (Adapter) > when Redis is enabled > lock operations > should fail to acquire lock when already locked [0.46ms]
(pass) CacheService (Adapter) > when Redis is enabled > lock operations > should allow acquire after release [0.41ms]
(pass) CacheService (Adapter) > when Redis is enabled > lock operations > should report correct lock status [0.43ms]
(pass) CacheService (Adapter) > when Redis is enabled > getOrSet (cache-aside pattern) > should compute and cache value on cache miss [0.50ms]
(pass) CacheService (Adapter) > when Redis is enabled > getOrSet (cache-aside pattern) > should return cached value without computing on cache hit [0.38ms]
(pass) CacheService (Adapter) > when Redis is enabled > onModuleDestroy > should complete cleanup without error [0.32ms]
(pass) CacheService (Adapter) > when Redis is disabled > should report disabled status [0.85ms]
(pass) CacheService (Adapter) > when Redis is disabled > should return null for get operations [0.61ms]

src/common/cache/cache-lock.service.bug.spec.ts:
(pass) CacheLockService - BUG DETECTION > BUG-004: Lock Behavior When Redis Disabled > should NOT silently return true when Redis is disabled [0.86ms]
(pass) CacheLockService - BUG DETECTION > BUG-004: Lock Behavior When Redis Disabled > should log warning/error when operating without Redis [0.36ms]
(pass) CacheLockService - BUG DETECTION > BUG-004: Lock Behavior When Redis Disabled > should fail-safe for critical operations [0.29ms]
(pass) CacheLockService - BUG DETECTION > Lock Acquisition Behavior > should properly acquire lock when Redis is available [0.33ms]
(pass) CacheLockService - BUG DETECTION > Lock Acquisition Behavior > should return false when lock already held [0.27ms]
(pass) CacheLockService - BUG DETECTION > Lock Acquisition Behavior > should handle Redis errors gracefully [0.33ms]
53 |       this.logger.error(
54 |         `Attempted to acquire lock without Redis: ${key}`,
55 |         undefined,
56 |         'CacheLockService',
57 |       );
58 |       throw new ServiceUnavailableException(
                 ^
ServiceUnavailableException: Distributed locking is unavailable. Critical operations cannot proceed.
 response: {
  message: "Distributed locking is unavailable. Critical operations cannot proceed.",
  error: "Service Unavailable",
  statusCode: 503,
},
   status: 503,
  options: {},

      at acquireLock (/home/ilelo/Documents/Projects/profile/profile-services/src/common/cache/cache-lock.service.ts:58:13)
      at acquireLock (/home/ilelo/Documents/Projects/profile/profile-services/src/common/cache/cache-lock.service.ts:38:5)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/common/cache/cache-lock.service.bug.spec.ts:153:37)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/common/cache/cache-lock.service.bug.spec.ts:148:64)
(fail) CacheLockService - BUG DETECTION > Alternative: In-Memory Fallback > should use in-memory fallback when Redis unavailable [0.38ms]

src/common/cache/cache-redis.bug.spec.ts:
64 | 
65 |       // BUG: Error might be silently swallowed!
66 |       const result = await cacheService.set('key', 'value');
67 | 
68 |       // Should indicate failure somehow
69 |       expect(result).toBe(false); // Or throw
                          ^
error: expect(received).toBe(expected)

Expected: false
Received: undefined

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/common/cache/cache-redis.bug.spec.ts:69:22)
(fail) Redis Cache - BUG DETECTION > BUG-054: Cache Set Without Error Handling > should report when cache set fails [0.89ms]
75 |         .mockResolvedValueOnce('OK');
76 | 
77 |       await cacheService.set('key', 'value');
78 | 
79 |       // Should have retried
80 |       expect(mockRedis.client.set).toHaveBeenCalledTimes(2);
                                        ^
error: expect(received).toHaveBeenCalledTimes(expected)

Expected number of calls: 2
Received number of calls: 1

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/common/cache/cache-redis.bug.spec.ts:80:36)
(fail) Redis Cache - BUG DETECTION > BUG-054: Cache Set Without Error Handling > should retry on transient failures [0.44ms]
(pass) Redis Cache - BUG DETECTION > BUG-050: Lock Not Released on Error > should release lock in finally block [0.44ms]
(pass) Redis Cache - BUG DETECTION > BUG-050: Lock Not Released on Error > should have auto-release mechanism for stuck locks [0.36ms]
(pass) Redis Cache - BUG DETECTION > BUG-050: Lock Not Released on Error > should provide withLock helper for safe usage [0.41ms]

src/common/pipes/parse-cuid.pipe.bug.spec.ts:
(pass) ParseCuidPipe - BUG DETECTION > BUG-036: Invalid IDs Pass Through > should REJECT invalid CUID format [0.24ms]
46 |     it('should ACCEPT valid CUID format', () => {
47 |       // Valid CUIDs: start with 'c', 25 chars, lowercase alphanumeric
48 |       const validCuids = ['clh1234567890abcdefghij', 'cm3e7xyzabcdefghij12345'];
49 | 
50 |       for (const validId of validCuids) {
51 |         expect(() => pipe.transform(validId)).not.toThrow();
                                                       ^
error: expect(received).not.toThrow()

Error name: "BadRequestException"
Error message: "Invalid ID format. Expected CUID format (e.g., 'clx1abc2def3ghi4jkl5mno6p')"

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/common/pipes/parse-cuid.pipe.bug.spec.ts:51:51)
(fail) ParseCuidPipe - BUG DETECTION > BUG-036: Invalid IDs Pass Through > should ACCEPT valid CUID format [0.15ms]
(pass) ParseCuidPipe - BUG DETECTION > BUG-036: Invalid IDs Pass Through > should throw on SQL injection attempts [0.06ms]
(pass) ParseCuidPipe - BUG DETECTION > BUG-036: Invalid IDs Pass Through > should throw on path traversal attempts [0.02ms]
24 |     // BUG-036 FIX: Reject invalid CUID format immediately
25 |     // This prevents invalid IDs from reaching the database layer
26 |     if (!this.cuidRegex.test(value)) {
27 |       throw new BadRequestException(
28 |         `Invalid ID format. Expected CUID format (e.g., 'clx1abc2def3ghi4jkl5mno6p')`,
29 |       );
           ^
BadRequestException: Invalid ID format. Expected CUID format (e.g., 'clx1abc2def3ghi4jkl5mno6p')
      at transform (/home/ilelo/Documents/Projects/profile/profile-services/src/common/pipes/parse-cuid.pipe.ts:29:7)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/common/pipes/parse-cuid.pipe.bug.spec.ts:77:27)
(fail) ParseCuidPipe - BUG DETECTION > Current Buggy Behavior (documenting) > currently allows invalid IDs through (THIS IS A BUG) [0.04ms]

src/common/logger/logger.service.spec.ts:
(pass) AppLoggerService > log > should log info message without throwing [4.69ms]
(pass) AppLoggerService > log > should log with context [0.35ms]
(pass) AppLoggerService > log > should log with metadata [0.20ms]
2026-01-07 19:07:18 [Application] [31merror[39m: Error message
(pass) AppLoggerService > error > should log error message without throwing [0.45ms]
2026-01-07 19:07:18 [ErrorContext] [31merror[39m: Error message
Stack trace here
(pass) AppLoggerService > error > should log error with stack trace [0.28ms]
2026-01-07 19:07:18 [Context] [31merror[39m: Error message {"code":"E001"}
Stack
(pass) AppLoggerService > error > should log error with metadata [0.25ms]
(pass) AppLoggerService > warn > should log warning message without throwing [0.21ms]
(pass) AppLoggerService > warn > should log warning with context and metadata [0.16ms]
(pass) AppLoggerService > debug > should log debug message without throwing [0.17ms]
(pass) AppLoggerService > debug > should log debug with context and metadata [0.19ms]
(pass) AppLoggerService > verbose > should log verbose message without throwing [0.18ms]
(pass) AppLoggerService > verbose > should use default context when set [0.16ms]
(pass) AppLoggerService > setContext > should set context for subsequent logs [0.25ms]
2026-01-07 19:07:18 [ErrorService] [31merror[39m: Error occurred {"errorCode":"E500"}
(pass) AppLoggerService > errorWithMeta > should log error with metadata using default context [0.26ms]

src/common/guards/roles.guard.spec.ts:
(pass) RolesGuard > canActivate > should allow access when no roles are required [1.01ms]
(pass) RolesGuard > canActivate > should allow access when user has required role [0.47ms]
(pass) RolesGuard > canActivate > should deny access when user does not have required role [0.39ms]
(pass) RolesGuard > canActivate > should deny access when user is not authenticated [0.36ms]
(pass) RolesGuard > canActivate > should allow access when user has one of multiple allowed roles [0.38ms]
(pass) RolesGuard > canActivate > should deny access when user role is not in allowed roles list [0.29ms]
(pass) RolesGuard > canActivate > should check roles from handler metadata [0.35ms]
(pass) RolesGuard > canActivate > should allow any authenticated user when roles array is empty [0.27ms]
(pass) RolesGuard > canActivate > should handle null user in request [0.28ms]
(pass) RolesGuard > role hierarchy > should not implicitly grant higher privileges to admins [0.24ms]
(pass) RolesGuard > role hierarchy > should require exact role match [0.23ms]

src/resumes/services/experience.service.bug-detection.spec.ts:
(pass) ExperienceService - Bug Detection > BUG #4: isCurrent and endDate validation > should REJECT isCurrent=true with endDate set [1.20ms]
 97 |         isCurrent: false,
 98 |       };
 99 | 
100 |       await expect(
101 |         service.addToResume('resume-123', 'user-123', invalidDto as any),
102 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/experience.service.bug-detection.spec.ts:102:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/experience.service.bug-detection.spec.ts:90:71)
(fail) ExperienceService - Bug Detection > BUG #4: isCurrent and endDate validation > should REJECT isCurrent=false with endDate=null (ambiguous) [0.84ms]
(pass) ExperienceService - Bug Detection > BUG #4: isCurrent and endDate validation > should ACCEPT isCurrent=true with endDate=null [0.51ms]
(pass) ExperienceService - Bug Detection > BUG #4: isCurrent and endDate validation > should ACCEPT isCurrent=false with valid endDate [0.56ms]
(pass) ExperienceService - Bug Detection > BUG #4: isCurrent and endDate validation > should include "isCurrent" or "endDate" in error message [0.63ms]
(pass) ExperienceService - Bug Detection > Date range validation > should REJECT endDate before startDate [0.57ms]
(pass) ExperienceService - Bug Detection > Date range validation > should REJECT same startDate and endDate [0.47ms]
217 |         order: 0, // Duplicate order!
218 |       };
219 | 
220 |       await expect(
221 |         service.addToResume('resume-123', 'user-123', duplicateOrderDto as any),
222 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/experience.service.bug-detection.spec.ts:222:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/experience.service.bug-detection.spec.ts:203:66)
(fail) ExperienceService - Bug Detection > Order uniqueness validation > should REJECT creating experience with duplicate order [0.60ms]
(pass) ExperienceService - Bug Detection > Order uniqueness validation > should ACCEPT experience with unique order [0.38ms]

src/resumes/services/project.service.spec.ts:
(pass) ProjectService > listForResume > should return paginated projects for resume [1.25ms]
(pass) ProjectService > getById > should return single project [0.54ms]
(pass) ProjectService > getById > should throw NotFoundException when project not found [0.39ms]
(pass) ProjectService > addToResume > should create new project [0.36ms]
(pass) ProjectService > updateById > should update existing project [0.41ms]
(pass) ProjectService > updateById > should throw NotFoundException when project not found [0.35ms]
(pass) ProjectService > deleteById > should delete project successfully [0.40ms]
(pass) ProjectService > deleteById > should throw NotFoundException when project not found [0.42ms]

src/resumes/services/bug-bounty.service.spec.ts:
(pass) BugBountyService > should be defined [0.61ms]
(pass) BugBountyService > should have correct entity name [0.27ms]
(pass) BugBountyService > should have a logger instance [0.23ms]
(pass) BugBountyService > CRUD operations > should list bug bounties for resume [0.42ms]
(pass) BugBountyService > CRUD operations > should add bug bounty to resume [0.33ms]
(pass) BugBountyService > CRUD operations > should delete bug bounty [0.26ms]

src/resumes/services/education.service.bug.spec.ts:
(pass) EducationService - BUG DETECTION > BUG-019: Missing Date Validation > should REJECT isCurrent=true with endDate set [0.78ms]
(pass) EducationService - BUG DETECTION > BUG-019: Missing Date Validation > should REJECT endDate before startDate [0.34ms]
118 |       };
119 | 
120 |       // BUG: Currently this might be ACCEPTED!
121 |       await expect(
122 |         service.addToResume('resume-123', 'user-123', invalidDto as any),
123 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/education.service.bug.spec.ts:123:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/education.service.bug.spec.ts:110:55)
(fail) EducationService - BUG DETECTION > BUG-019: Missing Date Validation > should REQUIRE endDate when isCurrent=false [0.61ms]
144 |       };
145 | 
146 |       // BUG: Currently this is ACCEPTED!
147 |       await expect(
148 |         service.addToResume('resume-123', 'user-123', duplicateOrderDto as any),
149 |       ).rejects.toThrow(BadRequestException);
                      ^
error: 

Expected promise that rejects
Received promise that resolved: Promise { <resolved> }

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/education.service.bug.spec.ts:149:17)
      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/education.service.bug.spec.ts:132:48)
(fail) EducationService - BUG DETECTION > BUG-052: Order Not Validated > should REJECT duplicate order values [1.00ms]

src/resumes/services/certification.service.spec.ts:
(pass) CertificationService > should be defined [0.62ms]
(pass) CertificationService > should have correct entity name [0.31ms]
(pass) CertificationService > should have a logger instance [0.31ms]
(pass) CertificationService > CRUD operations (inherited from BaseSubResourceService) > should list certifications for resume [0.43ms]
(pass) CertificationService > CRUD operations (inherited from BaseSubResourceService) > should get certification by id [0.31ms]
(pass) CertificationService > CRUD operations (inherited from BaseSubResourceService) > should add certification to resume [0.29ms]
(pass) CertificationService > CRUD operations (inherited from BaseSubResourceService) > should update certification [0.26ms]
(pass) CertificationService > CRUD operations (inherited from BaseSubResourceService) > should delete certification [0.27ms]

src/resumes/services/talk.service.spec.ts:
(pass) TalkService > should be defined [0.55ms]
(pass) TalkService > should have correct entity name [0.25ms]
(pass) TalkService > should have a logger instance [0.26ms]
(pass) TalkService > CRUD operations > should list talks for resume [0.30ms]
(pass) TalkService > CRUD operations > should add talk to resume [0.27ms]
(pass) TalkService > CRUD operations > should delete talk [0.25ms]

src/resumes/services/language.service.spec.ts:
(pass) LanguageService > should be defined [0.53ms]
(pass) LanguageService > should have correct entity name [0.24ms]
(pass) LanguageService > should have a logger instance [0.20ms]
(pass) LanguageService > CRUD operations (inherited from BaseSubResourceService) > should list languages for resume [0.30ms]
(pass) LanguageService > CRUD operations (inherited from BaseSubResourceService) > should add language to resume [0.32ms]
(pass) LanguageService > CRUD operations (inherited from BaseSubResourceService) > should delete language [0.28ms]

src/resumes/services/xss-sanitization.bug.spec.ts:
80 |           summary: payload,
81 |         } as any);
82 | 
83 |         // BUG: XSS payload stored as-is!
84 |         // Should be sanitized or escaped
85 |         expect(capturedDto.summary.includes('<script')).toBe(false);
                                                             ^
error: expect(received).toBe(expected)

Expected: false
Received: true

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/xss-sanitization.bug.spec.ts:85:57)
(fail) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 1 in summary [1.16ms]
81 |         } as any);
82 | 
83 |         // BUG: XSS payload stored as-is!
84 |         // Should be sanitized or escaped
85 |         expect(capturedDto.summary.includes('<script')).toBe(false);
86 |         expect(capturedDto.summary.includes('onerror=')).toBe(false);
                                                              ^
error: expect(received).toBe(expected)

Expected: false
Received: true

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/xss-sanitization.bug.spec.ts:86:58)
(fail) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 2 in summary [0.65ms]
82 | 
83 |         // BUG: XSS payload stored as-is!
84 |         // Should be sanitized or escaped
85 |         expect(capturedDto.summary.includes('<script')).toBe(false);
86 |         expect(capturedDto.summary.includes('onerror=')).toBe(false);
87 |         expect(capturedDto.summary.includes('onload=')).toBe(false);
                                                             ^
error: expect(received).toBe(expected)

Expected: false
Received: true

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/xss-sanitization.bug.spec.ts:87:57)
(fail) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 3 in summary [0.46ms]
83 |         // BUG: XSS payload stored as-is!
84 |         // Should be sanitized or escaped
85 |         expect(capturedDto.summary.includes('<script')).toBe(false);
86 |         expect(capturedDto.summary.includes('onerror=')).toBe(false);
87 |         expect(capturedDto.summary.includes('onload=')).toBe(false);
88 |         expect(capturedDto.summary.includes('javascript:')).toBe(false);
                                                                 ^
error: expect(received).toBe(expected)

Expected: false
Received: true

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/xss-sanitization.bug.spec.ts:88:61)
(fail) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 4 in summary [0.27ms]
83 |         // BUG: XSS payload stored as-is!
84 |         // Should be sanitized or escaped
85 |         expect(capturedDto.summary.includes('<script')).toBe(false);
86 |         expect(capturedDto.summary.includes('onerror=')).toBe(false);
87 |         expect(capturedDto.summary.includes('onload=')).toBe(false);
88 |         expect(capturedDto.summary.includes('javascript:')).toBe(false);
                                                                 ^
error: expect(received).toBe(expected)

Expected: false
Received: true

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/xss-sanitization.bug.spec.ts:88:61)
(fail) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 5 in summary [0.23ms]
82 | 
83 |         // BUG: XSS payload stored as-is!
84 |         // Should be sanitized or escaped
85 |         expect(capturedDto.summary.includes('<script')).toBe(false);
86 |         expect(capturedDto.summary.includes('onerror=')).toBe(false);
87 |         expect(capturedDto.summary.includes('onload=')).toBe(false);
                                                             ^
error: expect(received).toBe(expected)

Expected: false
Received: true

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/xss-sanitization.bug.spec.ts:87:57)
(fail) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 6 in summary [0.24ms]
(pass) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 7 in summary [0.25ms]
(pass) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 8 in summary [0.29ms]
80 |           summary: payload,
81 |         } as any);
82 | 
83 |         // BUG: XSS payload stored as-is!
84 |         // Should be sanitized or escaped
85 |         expect(capturedDto.summary.includes('<script')).toBe(false);
                                                             ^
error: expect(received).toBe(expected)

Expected: false
Received: true

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/xss-sanitization.bug.spec.ts:85:57)
(fail) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 9 in summary [0.22ms]
(pass) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize XSS payload 10 in summary [0.17ms]
(pass) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize HTML in experience description [0.25ms]
(pass) XSS Sanitization - BUG DETECTION > BUG-060: No XSS Sanitization > should sanitize HTML in project description [0.20ms]
(pass) XSS Sanitization - BUG DETECTION > URL Validation > should reject javascript: URLs in project links [0.16ms]
(pass) XSS Sanitization - BUG DETECTION > URL Validation > should reject data: URLs in image fields [0.16ms]

src/resumes/services/hackathon.service.spec.ts:
(pass) HackathonService > should be defined [0.54ms]
(pass) HackathonService > should have correct entity name [0.25ms]
(pass) HackathonService > should have a logger instance [0.19ms]
(pass) HackathonService > CRUD operations > should list hackathons for resume [0.27ms]
(pass) HackathonService > CRUD operations > should add hackathon to resume [0.31ms]
(pass) HackathonService > CRUD operations > should delete hackathon [0.27ms]

src/resumes/services/recommendation.service.spec.ts:
(pass) RecommendationService > should be defined [0.51ms]
(pass) RecommendationService > should have correct entity name [0.25ms]
(pass) RecommendationService > should have a logger instance [0.22ms]
(pass) RecommendationService > CRUD operations > should list recommendations for resume [0.29ms]
(pass) RecommendationService > CRUD operations > should add recommendation to resume [0.27ms]
(pass) RecommendationService > CRUD operations > should delete recommendation [0.27ms]

src/resumes/services/education.service.spec.ts:
(pass) EducationService > listForResume > should return paginated education entries [0.60ms]
(pass) EducationService > getById > should return single education entry [0.30ms]
(pass) EducationService > getById > should throw NotFoundException when not found [0.29ms]
(pass) EducationService > addToResume > should create new education entry [0.29ms]
(pass) EducationService > updateById > should update existing education entry [0.36ms]
(pass) EducationService > deleteById > should delete education entry successfully [0.32ms]
(pass) EducationService > reorder > should reorder education entries with custom message [0.51ms]

src/resumes/services/experience.service.spec.ts:
(pass) ExperienceService > listForResume > should return paginated experiences [0.80ms]
(pass) ExperienceService > getById > should return single experience [0.38ms]
(pass) ExperienceService > getById > should throw NotFoundException when not found [0.32ms]
(pass) ExperienceService > addToResume > should create new experience [0.31ms]
(pass) ExperienceService > updateById > should update existing experience [0.34ms]
(pass) ExperienceService > updateById > should throw NotFoundException when not found [0.31ms]
(pass) ExperienceService > deleteById > should delete experience successfully [0.28ms]
(pass) ExperienceService > deleteById > should throw NotFoundException when not found [0.27ms]

src/resumes/services/interest.service.spec.ts:
(pass) InterestService > should be defined [0.52ms]
(pass) InterestService > should have correct entity name [0.25ms]
(pass) InterestService > should have a logger instance [0.22ms]
(pass) InterestService > CRUD operations > should list interests for resume [0.27ms]
(pass) InterestService > CRUD operations > should add interest to resume [0.29ms]
(pass) InterestService > CRUD operations > should delete interest [0.26ms]

src/resumes/services/publication.service.spec.ts:
(pass) PublicationService > listForResume > should return paginated publications [0.66ms]
(pass) PublicationService > getById > should return single publication [0.31ms]
(pass) PublicationService > getById > should throw NotFoundException when not found [0.28ms]
(pass) PublicationService > addToResume > should create new publication [0.30ms]
(pass) PublicationService > updateById > should update existing publication [0.29ms]
(pass) PublicationService > deleteById > should delete publication successfully [0.31ms]

src/resumes/services/open-source.service.spec.ts:
(pass) OpenSourceService > should be defined [0.83ms]
(pass) OpenSourceService > should have correct entity name [0.37ms]
(pass) OpenSourceService > should have a logger instance [0.30ms]
(pass) OpenSourceService > CRUD operations > should list open source contributions for resume [0.45ms]
(pass) OpenSourceService > CRUD operations > should add open source contribution to resume [0.39ms]
(pass) OpenSourceService > CRUD operations > should delete open source contribution [0.33ms]

src/resumes/services/achievement.service.spec.ts:
(pass) AchievementService > findAll > should return paginated achievements for valid resume [0.61ms]
86 |       mockResumesRepository.findOne.mockResolvedValue(null);
87 | 
88 |       await expect(async () => await service.listForResume(resumeId, userId)).toThrow(
89 |         ForbiddenException,
90 |       );
91 |       expect(mockAchievementRepository.findAll.mock.calls.length).toBe(0);
                                                                       ^
error: expect(received).toBe(expected)

Expected: 0
Received: 1

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/achievement.service.spec.ts:91:67)
(fail) AchievementService > findAll > should throw ForbiddenException if resume not found [0.52ms]
(pass) AchievementService > findAll > should accept custom page and limit [0.31ms]
(pass) AchievementService > findOne > should return achievement for valid resume and id [0.28ms]
(pass) AchievementService > findOne > should throw NotFoundException if achievement not found [0.27ms]
166 |       mockResumesRepository.findOne.mockResolvedValue(null);
167 | 
168 |       await expect(
169 |         service.getById(resumeId, achievementId, userId),
170 |       ).rejects.toThrow(ForbiddenException);
171 |       expect(mockAchievementRepository.findOne.mock.calls.length).toBe(0);
                                                                        ^
error: expect(received).toBe(expected)

Expected: 0
Received: 2

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/achievement.service.spec.ts:171:67)
(fail) AchievementService > findOne > should throw ForbiddenException if resume not owned by user [0.34ms]
(pass) AchievementService > create > should create achievement for valid resume [0.32ms]
220 |       mockResumesRepository.findOne.mockResolvedValue(null);
221 | 
222 |       await expect(
223 |         service.addToResume(resumeId, userId, createDto),
224 |       ).rejects.toThrow(ForbiddenException);
225 |       expect(mockAchievementRepository.create.mock.calls.length).toBe(0);
                                                                       ^
error: expect(received).toBe(expected)

Expected: 0
Received: 1

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/achievement.service.spec.ts:225:66)
(fail) AchievementService > create > should throw ForbiddenException if resume not owned by user [0.33ms]
(pass) AchievementService > update > should update achievement for valid resume and id [0.29ms]
(pass) AchievementService > update > should throw NotFoundException if achievement not found [0.26ms]
(pass) AchievementService > remove > should delete achievement for valid resume and id [0.26ms]
(pass) AchievementService > remove > should throw NotFoundException if achievement not found [0.25ms]
(pass) AchievementService > reorder > should reorder achievements for valid resume [0.30ms]
349 |       mockResumesRepository.findOne.mockResolvedValue(null);
350 | 
351 |       await expect(
352 |         service.reorderInResume(resumeId, userId, ids),
353 |       ).rejects.toThrow(ForbiddenException);
354 |       expect(mockAchievementRepository.reorder.mock.calls.length).toBe(0);
                                                                        ^
error: expect(received).toBe(expected)

Expected: 0
Received: 1

      at <anonymous> (/home/ilelo/Documents/Projects/profile/profile-services/src/resumes/services/achievement.service.spec.ts:354:67)
(fail) AchievementService > reorder > should throw ForbiddenException if resume not owned by user [0.32ms]

src/resumes/services/limits.bug.spec.ts:
(pass) Resource Limits - BUG DETECTION > BUG-061: No Skills Limit > should limit skills per resume [1.69ms]
(pass) Resource Limits - BUG DETECTION > BUG-062: No Experiences Limit > should limit experiences per resume [0.40ms]
(pass) Resource Limits - BUG DETECTION > Other Missing Limits > should limit education entries
(pass) Resource Limits - BUG DETECTION > Other Missing Limits > should limit projects
(pass) Resource Limits - BUG DETECTION > Other Missing Limits > should limit certifications
(pass) Resource Limits - BUG DETECTION > Other Missing Limits > should limit total resume size

src/export/services/resume-docx.service.spec.ts:
(pass) ResumeDOCXService > generate > should generate DOCX for complete resume [0.66ms]
(pass) ResumeDOCXService > generate > should throw NotFoundException when user not found [0.42ms]
(pass) ResumeDOCXService > generate > should throw NotFoundException when resume not found [0.32ms]
(pass) ResumeDOCXService > generate > should handle errors from builder service [0.33ms]

src/export/services/resume-pdf.service.spec.ts:
(pass) ResumePDFService > generate > should generate PDF for valid resume with default options [0.74ms]
(pass) ResumePDFService > generate > should use custom palette parameter [0.36ms]
(pass) ResumePDFService > generate > should use custom language parameter [0.29ms]
(pass) ResumePDFService > generate > should include bannerColor when provided [0.27ms]
(pass) ResumePDFService > generate > should include userId when provided [0.27ms]
(pass) ResumePDFService > generate > should pass through all options to generator [0.27ms]
(pass) ResumePDFService > generate > should handle errors from generator [0.33ms]

src/export/services/docx-builder.service.spec.ts:
(pass) DocxBuilderService > generate > should return DOCX buffer [24.31ms]
(pass) DocxBuilderService > generate > should throw NotFoundException when user not found [0.84ms]
(pass) DocxBuilderService > generate > should throw NotFoundException when resume not found [0.44ms]
(pass) DocxBuilderService > generate > should use sections service to create document structure [8.06ms]
(pass) DocxBuilderService > generate > should apply document styles [7.30ms]

src/export/services/browser-manager.service.spec.ts:
(pass) BrowserManagerService > getBrowser > should launch browser on first call [0.80ms]
(pass) BrowserManagerService > getBrowser > should reuse existing browser on subsequent calls [0.34ms]
(pass) BrowserManagerService > getBrowser > should handle browser launch failure [0.33ms]
(pass) BrowserManagerService > closeBrowser > should close browser and clear reference [0.36ms]
(pass) BrowserManagerService > closeBrowser > should do nothing if browser not initialized [0.27ms]
(pass) BrowserManagerService > closeBrowser > should allow launching new browser after close [0.25ms]
(pass) BrowserManagerService > isActive > should return false when browser not initialized [0.23ms]
(pass) BrowserManagerService > isActive > should return true when browser is active [0.27ms]
(pass) BrowserManagerService > isActive > should return false after browser is closed [0.25ms]
(pass) BrowserManagerService > concurrent access > should handle concurrent getBrowser calls safely [0.31ms]

src/export/services/banner-capture.service.spec.ts:
(pass) BannerCaptureService > capture > should capture banner screenshot with default parameters [1.52ms]
(pass) BannerCaptureService > capture > should capture banner screenshot with custom palette [1.26ms]
(pass) BannerCaptureService > capture > should include logo URL when provided [0.96ms]
(pass) BannerCaptureService > capture > should apply correct viewport dimensions [0.52ms]
(pass) BannerCaptureService > capture > should wait for code block rendering [0.41ms]
(pass) BannerCaptureService > capture > should apply quality styles (antialiasing) [0.40ms]
(pass) BannerCaptureService > capture > should close page on success [0.30ms]
[31m[Nest] 334447  - [39m01/07/2026, 7:07:18 PM [31m  ERROR[39m [38;5;3m[BannerCaptureService] [39m[31m[BannerCapture] #banner not found![39m
(pass) BannerCaptureService > error handling > should handle #banner not found [0.93ms]
[31m[Nest] 334447  - [39m01/07/2026, 7:07:18 PM [31m  ERROR[39m [38;5;3m[BannerPageSetup] [39m[31m[BannerCapture] Error during page.goto:[39m
[31m[Nest] 334447  - [39m01/07/2026, 7:07:18 PM [31m  ERROR[39m [38;5;3m[BannerPageSetup] [39mError: Navigation failed
    at <anonymous> [90m(/home/ilelo/Documents/Projects/profile/profile-services/[39msrc/export/services/banner-capture.service.spec.ts:168:47[90m)[39m
    at <anonymous> [90m(/home/ilelo/Documents/Projects/profile/profile-services/[39msrc/export/services/banner-capture.service.spec.ts:167:49[90m)[39m
(pass) BannerCaptureService > error handling > should close page on navigation error [1.84ms]
[31m[Nest] 334447  - [39m01/07/2026, 7:07:18 PM [31m  ERROR[39m [38;5;3m[BannerReadyWaiter] [39m[31m[BannerCapture] <body> HTML snippet:[39m
<div id="banner"></div>
(pass) BannerCaptureService > error handling > should close page on selector timeout [0.67ms]
(pass) BannerCaptureService > error handling > should handle broken logo image (404) [0.57ms]
[31m[Nest] 334447  - [39m01/07/2026, 7:07:18 PM [31m  ERROR[39m [38;5;3m[BannerPageSetup] [39m[31m[BannerCapture] Error during page.goto:[39m
[31m[Nest] 334447  - [39m01/07/2026, 7:07:18 PM [31m  ERROR[39m [38;5;3m[BannerPageSetup] [39mError: Navigation failed
    at <anonymous> [90m(/home/ilelo/Documents/Projects/profile/profile-services/[39msrc/export/services/banner-capture.service.spec.ts:206:47[90m)[39m
    at <anonymous> [90m(/home/ilelo/Documents/Projects/profile/profile-services/[39msrc/export/services/banner-capture.service.spec.ts:205:60[90m)[39m
(pass) BannerCaptureService > error handling > should take debug screenshot on navigation error [0.65ms]
[31m[Nest] 334447  - [39m01/07/2026, 7:07:18 PM [31m  ERROR[39m [38;5;3m[BannerReadyWaiter] [39m[31m[BannerCapture] <body> HTML snippet:[39m
<div id="banner"></div>
(pass) BannerCaptureService > error handling > should take debug screenshot on selector wait error [0.57ms]
(pass) BannerCaptureService > URL building > should use configured host and port [0.47ms]
(pass) BannerCaptureService > URL building > should use default host when not configured [0.52ms]
(pass) BannerCaptureService > URL building > should properly encode palette parameter [0.44ms]
(pass) BannerCaptureService > URL building > should properly encode logo URL parameter [0.41ms]
(pass) BannerCaptureService > banner element capture > should capture #banner element as PNG [0.41ms]
(pass) BannerCaptureService > banner element capture > should return buffer from element screenshot [0.43ms]
(pass) BannerCaptureService > wait for rendering > should wait for fonts to load [0.37ms]
(pass) BannerCaptureService > wait for rendering > should wait for #banner selector [0.38ms]
(pass) BannerCaptureService > wait for rendering > should wait for #company-logo when logo URL provided [0.39ms]
(pass) BannerCaptureService > wait for rendering > should not wait for logo when no logo URL provided [0.37ms]

src/export/services/pdf-generator.service.spec.ts:
(pass) PdfGeneratorService > generate > should return PDF buffer [2.00ms]
(pass) PdfGeneratorService > generate > should setup page before navigation [1.13ms]
(pass) PdfGeneratorService > generate > should wait for resume to be ready [0.62ms]
(pass) PdfGeneratorService > generate > should extract and apply styles [0.74ms]
(pass) PdfGeneratorService > generate > should close page after generation [0.70ms]
(pass) PdfGeneratorService > generate > should close page even on error [0.63ms]
(pass) PdfGeneratorService > generate > should pass options to URL builder [0.38ms]

src/export/services/pdf-generator.service.bug.spec.ts:
