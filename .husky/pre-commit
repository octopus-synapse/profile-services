#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Pre-commit checks (fast feedback loop)..."
echo ""

# 1. Type check (~1s)
echo "  â†’ Type checking..."
bun run typecheck || exit 1

# 2. Fast lint with oxlint (~0.1s)
echo "  â†’ Fast lint (oxlint)..."
bun run lint:fast || exit 1

# 3. Unit tests (~2s)
echo "  â†’ Running unit tests..."
bun test || exit 1

# 4. Smoke tests (~0.7s)
echo "  â†’ Running smoke tests..."
bun run test:smoke || exit 1

echo ""
echo "âœ… Pre-commit passed! (~4s)"
echo ""
echo "ğŸ’¡ CI will run:"
echo "   - ESLint (type-aware rules)"
echo "   - Integration tests (require DB)"
